{"ast":null,"code":"import axios from 'axios';\nimport Alert from './Alert.vue';\nexport default {\n  data() {\n    return {\n      books: [],\n      addBookForm: {\n        title: '',\n        author: '',\n        read: []\n      },\n      message: '',\n      showMessage: false,\n      editForm: {\n        id: '',\n        title: '',\n        author: '',\n        read: []\n      }\n    };\n  },\n  components: {\n    alert: Alert\n  },\n  methods: {\n    getBooks() {\n      const path = 'http://localhost:5000/books';\n      axios.get(path).then(res => {\n        this.books = res.data.books;\n      }).catch(error => {\n        // eslint-disable-next-line\n        console.error(error);\n      });\n    },\n    addBook(payload) {\n      const path = 'http://localhost:5000/books';\n      axios.post(path, payload).then(() => {\n        this.getBooks();\n        this.message = 'User added!';\n        this.showMessage = true;\n      }).catch(error => {\n        // eslint-disable-next-line\n        console.log(error);\n        this.getBooks();\n      });\n    },\n    initForm() {\n      this.addBookForm.title = '';\n      this.addBookForm.author = '';\n      this.addBookForm.read = [];\n      this.editForm.id = '';\n      this.editForm.title = '';\n      this.editForm.author = '';\n      this.editForm.read = [];\n    },\n    onSubmit(evt) {\n      evt.preventDefault();\n      this.$refs.addBookModal.hide();\n      let read = false;\n      if (this.addBookForm.read[0]) read = true;\n      const payload = {\n        title: this.addBookForm.title,\n        author: this.addBookForm.author,\n        read // property shorthand\n      };\n\n      this.addBook(payload);\n      this.initForm();\n    },\n    onReset(evt) {\n      evt.preventDefault();\n      this.$refs.addBookModal.hide();\n      this.initForm();\n    },\n    editBook(book) {\n      this.editForm = book;\n    },\n    onSubmitUpdate(evt) {\n      evt.preventDefault();\n      this.$refs.editBookModal.hide();\n      let read = false;\n      if (this.editForm.read[0]) read = true;\n      const payload = {\n        title: this.editForm.title,\n        author: this.editForm.author,\n        read\n      };\n      this.updateBook(payload, this.editForm.id);\n    },\n    updateBook(payload, bookID) {\n      const path = `http://localhost:5000/books/${bookID}`;\n      axios.put(path, payload).then(() => {\n        this.getBooks();\n        this.message = 'User info updated!';\n        this.showMessage = true;\n      }).catch(error => {\n        // eslint-disable-next-line\n        console.error(error);\n        this.getBooks();\n      });\n    },\n    onResetUpdate(evt) {\n      evt.preventDefault();\n      this.$refs.editBookModal.hide();\n      this.initForm();\n      this.getBooks(); // why?\n    },\n\n    removeBook(bookID) {\n      const path = `http://localhost:5000/books/${bookID}`;\n      axios.delete(path).then(() => {\n        this.getBooks();\n        this.message = 'User info deleted!';\n        this.showMessage = true;\n      }).catch(error => {\n        // eslint-disable-next-line\n        console.error(error);\n        this.getBooks();\n      });\n    },\n    onDeleteBook(book) {\n      this.removeBook(book.id);\n    }\n  },\n  created() {\n    this.getBooks();\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","Alert","data","books","addBookForm","title","author","read","message","showMessage","editForm","id","components","alert","methods","getBooks","path","get","then","res","catch","error","console","addBook","payload","post","log","initForm","onSubmit","evt","preventDefault","$refs","addBookModal","hide","onReset","editBook","book","onSubmitUpdate","editBookModal","updateBook","bookID","put","onResetUpdate","removeBook","delete","onDeleteBook","created"],"sourceRoot":"","sources":["C:\\Users\\Yonsei\\Desktop\\vue4hour\\project\\src\\views\\BookView.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"row\">\r\n      <div class=\"col-sm-10\">\r\n        <h1>Data Quailty Management System</h1>\r\n        <hr />\r\n        <br /><br />\r\n        <alert :message=\"message\" v-if=\"showMessage\"></alert>\r\n        <button\r\n          type=\"button\"\r\n          class=\"btn btn-success btn-sm margin-button\"\r\n          v-b-modal.book-modal\r\n        >\r\n          Sign up\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          class=\"btn btn-success btn-sm margin-button\"\r\n          v-b-modal.book-modal\r\n        >\r\n          Login\r\n        </button>\r\n        <button type=\"button\" class=\"btn btn-success btn-sm margin-button\">\r\n          <router-link to=\"/ping\">DB connect</router-link>\r\n        </button>\r\n        <button type=\"button\" class=\"btn btn-success btn-sm margin-button\">\r\n          <router-link to=\"/dbconnect\">DB connect</router-link>\r\n        </button>\r\n        <br /><br />\r\n        <table class=\"table table-hover\">\r\n          <thead>\r\n            <tr>\r\n              <th scope=\"col\">Email</th>\r\n              <th scope=\"col\">PW</th>\r\n              <th scope=\"col\">Admin?</th>\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"(book, index) in books\" :key=\"index\">\r\n              <td>{{ book.title }}</td>\r\n              <td>{{ book.author }}</td>\r\n              <td>\r\n                <span v-if=\"book.read\">Yes</span>\r\n                <span v-else>No</span>\r\n              </td>\r\n              <td>\r\n                <div class=\"btn-group\" role=\"group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"btn btn-warning btn-sm\"\r\n                    v-b-modal.book-update-modal\r\n                    @click=\"editBook(book)\"\r\n                  >\r\n                    Update\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"btn btn-danger btn-sm\"\r\n                    @click=\"onDeleteBook(book)\"\r\n                  >\r\n                    Delete\r\n                  </button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <div>\r\n        <router-view />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios'\r\nimport Alert from './Alert.vue'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      books: [],\r\n      addBookForm: {\r\n        title: '',\r\n        author: '',\r\n        read: []\r\n      },\r\n      message: '',\r\n      showMessage: false,\r\n      editForm: {\r\n        id: '',\r\n        title: '',\r\n        author: '',\r\n        read: []\r\n      }\r\n    }\r\n  },\r\n  components: {\r\n    alert: Alert\r\n  },\r\n  methods: {\r\n    getBooks() {\r\n      const path = 'http://localhost:5000/books'\r\n      axios\r\n        .get(path)\r\n        .then((res) => {\r\n          this.books = res.data.books\r\n        })\r\n        .catch((error) => {\r\n          // eslint-disable-next-line\r\n          console.error(error)\r\n        })\r\n    },\r\n    addBook(payload) {\r\n      const path = 'http://localhost:5000/books'\r\n      axios\r\n        .post(path, payload)\r\n        .then(() => {\r\n          this.getBooks()\r\n          this.message = 'User added!'\r\n          this.showMessage = true\r\n        })\r\n        .catch((error) => {\r\n          // eslint-disable-next-line\r\n          console.log(error)\r\n          this.getBooks()\r\n        })\r\n    },\r\n    initForm() {\r\n      this.addBookForm.title = ''\r\n      this.addBookForm.author = ''\r\n      this.addBookForm.read = []\r\n      this.editForm.id = ''\r\n      this.editForm.title = ''\r\n      this.editForm.author = ''\r\n      this.editForm.read = []\r\n    },\r\n    onSubmit(evt) {\r\n      evt.preventDefault()\r\n      this.$refs.addBookModal.hide()\r\n      let read = false\r\n      if (this.addBookForm.read[0]) read = true\r\n      const payload = {\r\n        title: this.addBookForm.title,\r\n        author: this.addBookForm.author,\r\n        read // property shorthand\r\n      }\r\n      this.addBook(payload)\r\n      this.initForm()\r\n    },\r\n    onReset(evt) {\r\n      evt.preventDefault()\r\n      this.$refs.addBookModal.hide()\r\n      this.initForm()\r\n    },\r\n    editBook(book) {\r\n      this.editForm = book\r\n    },\r\n    onSubmitUpdate(evt) {\r\n      evt.preventDefault()\r\n      this.$refs.editBookModal.hide()\r\n      let read = false\r\n      if (this.editForm.read[0]) read = true\r\n      const payload = {\r\n        title: this.editForm.title,\r\n        author: this.editForm.author,\r\n        read\r\n      }\r\n      this.updateBook(payload, this.editForm.id)\r\n    },\r\n    updateBook(payload, bookID) {\r\n      const path = `http://localhost:5000/books/${bookID}`\r\n      axios\r\n        .put(path, payload)\r\n        .then(() => {\r\n          this.getBooks()\r\n          this.message = 'User info updated!'\r\n          this.showMessage = true\r\n        })\r\n        .catch((error) => {\r\n          // eslint-disable-next-line\r\n          console.error(error)\r\n          this.getBooks()\r\n        })\r\n    },\r\n    onResetUpdate(evt) {\r\n      evt.preventDefault()\r\n      this.$refs.editBookModal.hide()\r\n      this.initForm()\r\n      this.getBooks() // why?\r\n    },\r\n    removeBook(bookID) {\r\n      const path = `http://localhost:5000/books/${bookID}`\r\n      axios\r\n        .delete(path)\r\n        .then(() => {\r\n          this.getBooks()\r\n          this.message = 'User info deleted!'\r\n          this.showMessage = true\r\n        })\r\n        .catch((error) => {\r\n          // eslint-disable-next-line\r\n          console.error(error)\r\n          this.getBooks()\r\n        })\r\n    },\r\n    onDeleteBook(book) {\r\n      this.removeBook(book.id)\r\n    }\r\n  },\r\n  created() {\r\n    this.getBooks()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.margin-button {\r\n  margin-right: 5px; /* Adjust the value as per your requirement*/\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}